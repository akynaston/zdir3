---
tags: ["#powershell"]
---
# Interpreting Status of Storage Quotas via Exchange Management Shell

#### Syndication

* [RSS 2.0](http://msexchangeteam.com/rss.aspx)
* [Atom 1.0](http://msexchangeteam.com/atom.aspx)

#### This Blog

* [Home](http://msexchangeteam.com/default.aspx)
* [About](http://msexchangeteam.com/about.aspx)
* [Links](http://msexchangeteam.com/linklist.aspx)

#### Post Categories

* [Administration (209)](http://msexchangeteam.com/archive/category/3648.aspx)
* [All Posts (673)](http://msexchangeteam.com/archive/category/8162.aspx)
* [Announcements (9)](http://msexchangeteam.com/archive/category/11163.aspx)
* [Bloggers OPML and lists (2)](http://msexchangeteam.com/archive/category/4976.aspx)
* [Calendaring (30)](http://msexchangeteam.com/archive/category/5471.aspx)
* [Clustering (44)](http://msexchangeteam.com/archive/category/3896.aspx)
* [Community (187)](http://msexchangeteam.com/archive/category/5472.aspx)
* [Development (39)](http://msexchangeteam.com/archive/category/3305.aspx)
* [Directory (69)](http://msexchangeteam.com/archive/category/3304.aspx)
* [Documentation (87)](http://msexchangeteam.com/archive/category/4981.aspx)
* [Documentation updates (28)](http://msexchangeteam.com/archive/category/11153.aspx)
* [Exchange 2007 (397)](http://msexchangeteam.com/archive/category/10058.aspx)
* [Exchange 2010 (18)](http://msexchangeteam.com/archive/category/11164.aspx)
* [Exchange Labs (3)](http://msexchangeteam.com/archive/category/11159.aspx)
* [History (32)](http://msexchangeteam.com/archive/category/3460.aspx)
* [Hyper-V (1)](http://msexchangeteam.com/archive/category/11161.aspx)
* [Job Openings (14)](http://msexchangeteam.com/archive/category/9915.aspx)
* [Microsoft (109)](http://msexchangeteam.com/archive/category/4429.aspx)
* [Microsoft IT (14)](http://msexchangeteam.com/archive/category/10426.aspx)
* [Mobility (58)](http://msexchangeteam.com/archive/category/3827.aspx)
* [MVP Bios (1)](http://msexchangeteam.com/archive/category/7219.aspx)
* [Outlook (50)](http://msexchangeteam.com/archive/category/4478.aspx)
* [Outlook Web Access (66)](http://msexchangeteam.com/archive/category/3990.aspx)
* [Protocols (11)](http://msexchangeteam.com/archive/category/3776.aspx)
* [Role: Client Access (60)](http://msexchangeteam.com/archive/category/11156.aspx)
* [Role: Edge Transport (13)](http://msexchangeteam.com/archive/category/11158.aspx)
* [Role: Hub Transport (28)](http://msexchangeteam.com/archive/category/11155.aspx)
* [Role: Mailbox (83)](http://msexchangeteam.com/archive/category/11154.aspx)
* [Role: Unified Messaging (14)](http://msexchangeteam.com/archive/category/11157.aspx)
* [Scripting (19)](http://msexchangeteam.com/archive/category/11149.aspx)
* [Security (31)](http://msexchangeteam.com/archive/category/11152.aspx)
* [Setup (51)](http://msexchangeteam.com/archive/category/3308.aspx)
* [Storage (88)](http://msexchangeteam.com/archive/category/3303.aspx)
* [Team Bios (283)](http://msexchangeteam.com/archive/category/3078.aspx)
* [Tips 'n Tricks (257)](http://msexchangeteam.com/archive/category/3307.aspx)
* [Tools (149)](http://msexchangeteam.com/archive/category/3309.aspx)
* [Transport & Routing (81)](http://msexchangeteam.com/archive/category/3754.aspx)
* [Troubleshooting (156)](http://msexchangeteam.com/archive/category/3306.aspx)
* [Unified Messaging (20)](http://msexchangeteam.com/archive/category/11150.aspx)
* [Virtualization (3)](http://msexchangeteam.com/archive/category/11160.aspx)
* [Webcast (1)](http://msexchangeteam.com/archive/category/11162.aspx)

#### Archives

* [June 2009 (13)](http://msexchangeteam.com/archive/2009/06.aspx)
* [May 2009 (15)](http://msexchangeteam.com/archive/2009/05.aspx)
* [April 2009 (11)](http://msexchangeteam.com/archive/2009/04.aspx)
* [March 2009 (10)](http://msexchangeteam.com/archive/2009/03.aspx)
* [February 2009 (7)](http://msexchangeteam.com/archive/2009/02.aspx)
* [January 2009 (11)](http://msexchangeteam.com/archive/2009/01.aspx)
* [December 2008 (10)](http://msexchangeteam.com/archive/2008/12.aspx)
* [November 2008 (10)](http://msexchangeteam.com/archive/2008/11.aspx)
* [October 2008 (11)](http://msexchangeteam.com/archive/2008/10.aspx)
* [September 2008 (9)](http://msexchangeteam.com/archive/2008/09.aspx)
* [August 2008 (16)](http://msexchangeteam.com/archive/2008/08.aspx)
* [July 2008 (13)](http://msexchangeteam.com/archive/2008/07.aspx)
* [June 2008 (13)](http://msexchangeteam.com/archive/2008/06.aspx)
* [May 2008 (12)](http://msexchangeteam.com/archive/2008/05.aspx)
* [April 2008 (15)](http://msexchangeteam.com/archive/2008/04.aspx)
* [March 2008 (20)](http://msexchangeteam.com/archive/2008/03.aspx)
* [February 2008 (22)](http://msexchangeteam.com/archive/2008/02.aspx)
* [January 2008 (11)](http://msexchangeteam.com/archive/2008/01.aspx)
* [December 2007 (13)](http://msexchangeteam.com/archive/2007/12.aspx)
* [November 2007 (17)](http://msexchangeteam.com/archive/2007/11.aspx)
* [October 2007 (21)](http://msexchangeteam.com/archive/2007/10.aspx)
* [September 2007 (17)](http://msexchangeteam.com/archive/2007/09.aspx)
* [August 2007 (19)](http://msexchangeteam.com/archive/2007/08.aspx)
* [July 2007 (15)](http://msexchangeteam.com/archive/2007/07.aspx)
* [June 2007 (14)](http://msexchangeteam.com/archive/2007/06.aspx)
* [May 2007 (14)](http://msexchangeteam.com/archive/2007/05.aspx)
* [April 2007 (19)](http://msexchangeteam.com/archive/2007/04.aspx)
* [March 2007 (20)](http://msexchangeteam.com/archive/2007/03.aspx)
* [February 2007 (27)](http://msexchangeteam.com/archive/2007/02.aspx)
* [January 2007 (26)](http://msexchangeteam.com/archive/2007/01.aspx)
* [December 2006 (19)](http://msexchangeteam.com/archive/2006/12.aspx)
* [November 2006 (27)](http://msexchangeteam.com/archive/2006/11.aspx)
* [October 2006 (32)](http://msexchangeteam.com/archive/2006/10.aspx)
* [September 2006 (18)](http://msexchangeteam.com/archive/2006/09.aspx)
* [August 2006 (21)](http://msexchangeteam.com/archive/2006/08.aspx)
* [July 2006 (14)](http://msexchangeteam.com/archive/2006/07.aspx)
* [June 2006 (27)](http://msexchangeteam.com/archive/2006/06.aspx)
* [May 2006 (15)](http://msexchangeteam.com/archive/2006/05.aspx)
* [April 2006 (16)](http://msexchangeteam.com/archive/2006/04.aspx)
* [March 2006 (18)](http://msexchangeteam.com/archive/2006/03.aspx)
* [February 2006 (12)](http://msexchangeteam.com/archive/2006/02.aspx)
* [January 2006 (10)](http://msexchangeteam.com/archive/2006/01.aspx)
* [December 2005 (12)](http://msexchangeteam.com/archive/2005/12.aspx)
* [November 2005 (12)](http://msexchangeteam.com/archive/2005/11.aspx)
* [October 2005 (11)](http://msexchangeteam.com/archive/2005/10.aspx)
* [September 2005 (9)](http://msexchangeteam.com/archive/2005/09.aspx)
* [August 2005 (14)](http://msexchangeteam.com/archive/2005/08.aspx)
* [July 2005 (14)](http://msexchangeteam.com/archive/2005/07.aspx)
* [June 2005 (14)](http://msexchangeteam.com/archive/2005/06.aspx)
* [May 2005 (10)](http://msexchangeteam.com/archive/2005/05.aspx)
* [April 2005 (13)](http://msexchangeteam.com/archive/2005/04.aspx)
* [March 2005 (15)](http://msexchangeteam.com/archive/2005/03.aspx)
* [February 2005 (13)](http://msexchangeteam.com/archive/2005/02.aspx)
* [January 2005 (12)](http://msexchangeteam.com/archive/2005/01.aspx)
* [December 2004 (13)](http://msexchangeteam.com/archive/2004/12.aspx)
* [November 2004 (14)](http://msexchangeteam.com/archive/2004/11.aspx)
* [October 2004 (17)](http://msexchangeteam.com/archive/2004/10.aspx)
* [September 2004 (10)](http://msexchangeteam.com/archive/2004/09.aspx)
* [August 2004 (16)](http://msexchangeteam.com/archive/2004/08.aspx)
* [July 2004 (21)](http://msexchangeteam.com/archive/2004/07.aspx)
* [June 2004 (24)](http://msexchangeteam.com/archive/2004/06.aspx)
* [May 2004 (26)](http://msexchangeteam.com/archive/2004/05.aspx)
* [April 2004 (24)](http://msexchangeteam.com/archive/2004/04.aspx)
* [March 2004 (31)](http://msexchangeteam.com/archive/2004/03.aspx)
* [February 2004 (18)](http://msexchangeteam.com/archive/2004/02.aspx)

#### Interpreting Status of Storage Quotas via Exchange Management Shell

When using the Exchange Management Shell to view mailbox properties using the get-mailbox task, the output of the task may contain the following information:

[![[./_resources/Interpreting_Status_of_Storage_Quotas_via_Exchange_Management_Shell.resources/original.3.aspx]]](http://msexchangeteam.com/photos/postpictures/images/428961/original.aspx)

The value of “unlimited” above can be deceiving depending on the circumstance. In order to truly evaluate what the current storage quota status is, it is necessary to also look at the _UseDatabaseQuotaDefaults_ parameter. A value of TRUE on _UseDatabaseQuotaDefaults_ means that the per-mailbox settings are ignored and the mailbox database defaults are used.

> **Note:** By default, the values on the user’s mailbox database are set to the following:
> 
> [![[./_resources/Interpreting_Status_of_Storage_Quotas_via_Exchange_Management_Shell.resources/original.aspx]]](http://msexchangeteam.com/photos/postpictures/images/428962/original.aspx)
> 
> **Issue Warning :** 1,991,680,000 Bytes = 1.9GB
> 
> **Prohibit Send:** 2,099,152,000 Bytes = 2GB
> 
> **Prohibit Send and Receive:** 2,411,520,000 Bytes = 2.3GB

A value of FALSE on _UseDatabaseQuotaDefaults_ means that the per-mailbox settings are used.

These values are based on the following assumptions:

* A user receives 100 x 50 KB messages a day.
* This equates to approximately 5MB of mail data per day and 100MB of mail over the course of 20 days.
		**Issue Warning:** 20 days of warnings should be sufficient for a user to make adjustments to their mailbox size.
	
		**Prohibit Send:** Promotes the user or large mailboxes in Exchange Server 2007.
	
	**Prohibit Send and Receive:** If a user goes on vacation the day before getting the Prohibit Send warning message, then he/she has approximately 60 days to be away before the mailbox begings to reject incoming messages. In addition, this small gap between **Prohibit Send** and **Prohibit Send and Receive** allows administrators to have a predictable max database size.
	

**More Information**

The following table maps the storage limits to their respective parameters in Exchange Management Shell and Active Directory attribute for a given mailbox:

|     |     |     |
| --- | --- | --- |
| **Storage Limits** | **Exchange Management Shell Parameters using get-mailbox** | **Active Directory Attribute** |
| Issue warning at (KB): | _IssueWarningQuota_ | _mDBStorageQuota_ |
| Prohibit send at (KB): | _ProhibitSendQuota_ | _mDBOverQuotaLimit_ |
| Prohibit send and receive at (KB): | _ProhibitSendReceiveQuota_ | _mDBOverHardQuotaLimit_ |

In addition, the **Use mailbox database defaults** checkbox on the properties of the mailbox > Mailbox Settings > Storage Quotas in the Exchange Management Console, maps back to the _UseDatabaseQuotaDefaults_ parameter in the Exchange Management Shell and the _mDBUseDefaults_ attribute in Active Directory.

There are three different kinds of values here that play into the storage quotas feature:

1. Per-mailbox database settings
2. Per-mailbox settings
3. Boolean on each mailbox to control whether per-mailbox database settings or per-mailbox settings are used for the mailbox storage quota behavior.

To evaluate an individual mailbox to determine what quota values are in effect (mailbox database or individual mailbox), using the Exchange Management Shell and run the following command:

**_get-mailbox –id <MAILBOX> | format-list \*quota,UseDatabaseDefaults_**

If mailbox database settings are used as defaults, the values for the following would take effect:

|     |     |     |     |
| --- | --- | --- | --- |
| **Exchange Management Shell** |     | **Active Directory** |     |
| _IssueWarningQuota_ | unlimited | _mDBStorageQuota_ | Not Set |
| _ProhibitSendQuota_ | unlimited | _mDBOverQuotaLimit_ | Not Set |
| _ProhibitSendReceiveQuota_ | unlimited | _mDBOverHardQuotaLimit_ | Not Set |
| _UseDatabaseQuotaDefaults_ | TRUE | _mDBUseDefaults_ | TRUE |

**\* In this case, “unlimited” does not mean the mailbox has unlimited size. Instead you would need to reference the mailbox store storage limits to see what the limits are currently set to. Using the Exchange Management Shell, the following command would show the current quota limits of the mailbox database: get-mailboxdatabase –id “<MAILBOX\_DATABASE\_NAME>” | format-list \*quota**

If mailbox database settings are not used as defaults, the values for the following would take effect:

> **Note**: The values below are a sample

|     |     |     |     |
| --- | --- | --- | --- |
| **Exchange Management Shell** |     | **Active Directory** |     |
| _IssueWarningQuota_ | 400000 | _mDBStorageQuota_ | 400000 |
| _ProhibitSendQuota_ | 500000 | _mDBOverQuotaLimit_ | 500000 |
| _ProhibitSendReceiveQuota_ | 525000 | _mDBOverHardQuotaLimit_ | 525000 |
| _UseDatabaseQuotaDefaults_ | FALSE | _mDBUseDefaults_ | FALSE |

If mailbox database settings are used as defaults, and the per-mailbox settings are set, the following would take effect in the table below:

[![[./_resources/Interpreting_Status_of_Storage_Quotas_via_Exchange_Management_Shell.resources/original.2.aspx]]](http://msexchangeteam.com/photos/postpictures/images/428963/original.aspx)

Figure 1: Storage quotas on the mailbox database

|     |     |     |     |
| --- | --- | --- | --- |
| **Exchange Management Shell** |     | **Active Directory** |     |
| _IssueWarningQuota_ | 400000 | _mDBStorageQuota_ | 400000 |
| _ProhibitSendQuota_ | 500000 | _mDBOverQuotaLimit_ | 500000 |
| _ProhibitSendReceiveQuota_ | 525000 | _mDBOverHardQuotaLimit_ | 525000 |
| _UseDatabaseQuotaDefaults_ | TRUE | _mDBUseDefaults_ | TRUE |

 If mailbox database settings are not used as defaults, and the per-mailbox settings are not set, the following would take effect in the table below:

[![[./_resources/Interpreting_Status_of_Storage_Quotas_via_Exchange_Management_Shell.resources/original.1.aspx]]](http://msexchangeteam.com/photos/postpictures/images/428964/original.aspx)

Figure 2: Storage quotas on the mailbox database

|     |     |     |     |
| --- | --- | --- | --- |
| **Exchange Management Shell** |     | **Active Directory** |     |
| _IssueWarningQuota_ | unlimited | _mDBStorageQuota_ | Not Set |
| _ProhibitSendQuota_ | unlimited | _mDBOverQuotaLimit_ | Not Set |
| _ProhibitSendReceiveQuota_ | unlimited | _mDBOverHardQuotaLimit_ | Not Set |
| _UseDatabaseQuotaDefaults_ | FALSE | _mDBUseDefaults_ | FALSE |

 **\* In this case, “unlimited” actually means this mailbox has an unlimited size.**

The behavior described is by design.

\-[Malvin M. Seale](http://msexchangeteam.com/articles/427827.aspx)

Published Wednesday, September 20, 2006 5:48 PM by [Exchange](http://msexchangeteam.com/user/Profile.aspx?UserID=3106)
Filed Under: [Storage](http://msexchangeteam.com/archive/category/3303.aspx), [All Posts](http://msexchangeteam.com/archive/category/8162.aspx), [Exchange 2007](http://msexchangeteam.com/archive/category/10058.aspx)

### Comments

|     |     |
| --- | --- |
|     | ####  said:<br><br>So if I'd like to have the "real" value of the quota limit, I'd have to write a script, right? Would be nice to have this out of the box... Christian<br>September 21, 2006 7:23 AM |

_New Comments to this post are disabled_

#### News

* * *

This blog and its contents are provided "AS IS" with no warranties, and they confer no rights. Use of any included script samples are subject to the terms specified in the [Terms of Use](http://www.microsoft.com/info/cpyright.htm).

* * *

**New!** Would you like to suggest a topic for the Exchange team to blog about? Send [suggestions to us](http://msexchangeteam.com/archive/2004/12/10/279655.aspx).

* * *

* * *

* * *

#### Poll:

#### Other Exchange Blogs from MSFT

* [Exchange Development Blog](http://blogs.msdn.com/exchangedev)

#### Other Cool Places

* [Microsoft Exchange](http://www.microsoft.com/exchange)
* [Exchange TechCenter](http://www.microsoft.com/technet/prodtechnol/exchange/default.mspx)
* [Search Exchange](http://searchexchange.techtarget.com/)
* [MSExchange.org](http://www.msexchange.org/)
* [Messagingtalk.org](http://www.messagingtalk.org/)
* [The Official Microsoft Speech Server Blog](http://blogs.msdn.com/mssblog)
* [The Official SBS Blog](http://blogs.technet.com/sbs)
* [Sharepoint Team Blog](http://blogs.msdn.com/sharepoint)
* [Exchange 2007 Wiki](http://www.exchangeninjas.com/)
* [Microsoft Office Outlook Team Blog](http://blogs.msdn.com/outlook)
* [Microsoft Forefront Server Security Blog](http://blogs.technet.com/fss)
* [Windows Virtualization Team Blog](http://blogs.technet.com/virtualization)
* [Ask The Performance Team Blog](http://blogs.technet.com/askperf)
* [Office Communications Server Team](http://communicationsserverteam.com/default.aspx)
* [Office Communicator Team Blog](http://communicatorteam.com/default.aspx)
* [Office for Mac Team Blog](http://blogs.msdn.com/macmojo)
* [Security Vulnerability Research & Defense](http://blogs.technet.com/swi/default.aspx)
* [The Master Blog](http://blogs.technet.com/themasterblog)
* [Official Microsoft Team Blogs Blog](http://blogs.technet.com/blogms)

#### International

* [Exchange FAQ (Danish)](http://www.exchange-faq.dk/)
* [Exchange User Group Europe](http://www.eugeurope.org/)
* [Rui José Silva MVP (Portuguese)](http://ehlo.blogspot.com/)
* [Anderson Patricio MVP (Brazilian Portuguese)](http://spaces.msn.com/andersonpatricio)
* [Grupo Latino de usuarios de Exchange](http://www.msglue.org/)
* [chrischmi.de (German)](http://chrischmi.de/blog)
* [Pro-Exchange (Belgium)](http://www.proexchange.be/)
* [Markus' Messaging Blog (German)](http://msg-blog.de/)
* [Frank's Exchange FAQ (German)](http://www.msxfaq.de/)
* [Το Ελληνικό Exchange Blog (Greek)](http://blogs.technet.com/pamal)
* [Groupe des Utilisateurs Exchange (French)](http://www.msexchange.fr/)
* [E-mail és a detektívek (Hungarian)](http://emaildetektiv.hu/)

#### \[MS\] Exchange Blogs

* [KC Lemson Exch PM](http://blogs.msdn.com/kclemson)
* [Evan Dodds Exch PM](http://blogs.technet.com/evand)
* [Gerod Serafin MCS](http://blogs.msdn.com/Gerod_Serafin)
* [Stephen Griffin Escalation Engineer](http://blogs.msdn.com/stephen_griffin)
* [Sean Daniel SBS PM](http://seanda.blogspot.com/)
* [Dave Goldman Exch CPR](http://blogs.msdn.com/dgoldman)
* [Matt Stehle Dev Support](http://blogs.msdn.com/mstehle)
* [Harold Wong IT Evangelist](http://blogs.technet.com/haroldwong)
* [The CollabTools blog](http://blogs.technet.com/collabtools)
* [Jason Mayans Program Mgr Lead](http://blogs.technet.com/jmayans)
* [Vivek Sharma Program Manager](http://www.viveksharma.com/techlog)
* [Scott Schnoll Principal Technical Writer](http://blogs.technet.com/scottschnoll)
* [Ewan Dalton Solutions Architect](http://blogs.technet.com/ewan)
* [Doug Gowans MCS](http://blogs.msdn.com/douggowans)
* [Ben Winzenz CSS](http://blogs.technet.com/benw)
* [Feroze Daud Exch Dev](http://blogs.msdn.com/feroze_daud)
* [David Strome Sr Technical Writer](http://blogs.technet.com/dstrome)
* [Jeff Stokes CSS](http://blogs.technet.com/jeff_stokes/default.aspx)
* [Mike Lagase CSS](http://blogs.technet.com/mikelag)
* [Microsoft UK UC Blog](http://blogs.technet.com/msukucc)
* [Tim McMichael CSS](http://blogs.technet.com/timmcmic)
* [Bharat Suneja Sr Technical Writer](http://www.exchangepedia.com/blog)

#### \[MVP/Community\] Blogs/Sites

* [MS Exchange Blog](http://hellomate.typepad.com/)
* [rcpt to:](http://msexchange.blogspot.com/)
* [Paul's Down-Home Page](http://www.robichaux.net/blog)
* [Slipstick](http://www.slipstick.com/exs/index.htm)
* [The P0stmaster's Blog](http://p0stmaster.blogspot.com/)
* [Susan Bradley's SBS Blog](http://msmvps.com/bradley)
* [SBS FAQ](http://www.sbsfaq.com/)
* [Chad Gross SBS](http://msmvps.com/cgross)
* [Kevin Weilbacher SBS](http://msmvps.com/kwsupport)
* [Jim McBee](http://mostlyexchange.blogspot.com/)
* [MCSEworld by Daniel Petri](http://www.petri.co.il/)
* [subject: exchange](http://msmvps.com/blogs/ehlo/default.aspx)
* [Vlad Mazek](http://www.vladville.com/)
* [Thierry Deman](http://www.faqexchange.info/)
* [Henrik Walther Blog](http://blogs.msexchange.org/walther)
* [Devin L. Ganger's Blog](http://blogs.3sharp.com/blog/deving)
* [MM&M UG UK](http://www.mmmug.co.uk/)
* [BlankMan's Blog](http://blankmanblog.spaces.live.com/)
* [Archiving101](http://www.archiving101.com/)
* [Exchange_genie](http://www.exchange-genie.com/)
* [Jan Geisbauer's Blog](http://blog.geisbauer.de/)
* [Glen's Exchange Dev Blog](http://gsexdev.blogspot.com/)
* [Michael B. Smith](http://theessentialexchange.com/blogs/michael)
* [msgoodies](http://msgoodies.blogspot.com/)
* [C:>telnet 127.0.0.1 25](http://telnetport25.wordpress.com/)
* [Elan Shudnow's Blog](http://www.shudnow.net/)
