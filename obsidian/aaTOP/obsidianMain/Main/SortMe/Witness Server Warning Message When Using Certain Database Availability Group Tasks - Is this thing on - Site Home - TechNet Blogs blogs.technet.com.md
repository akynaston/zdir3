# Witness Server Warning Message When Using Certain Database Availability Group Tasks - Is this thing on? - Site Home - TechNet Blogs [blogs.technet.com]

* [TechNet](http://technet.microsoft.com/)

* [Products](http://blogs.technet.com/b/scottschnoll/archive/2011/06/08/witness-server-warning-message-when-using-certain-database-availability-group-tasks.aspx)
* [IT Resources](http://blogs.technet.com/b/scottschnoll/archive/2011/06/08/witness-server-warning-message-when-using-certain-database-availability-group-tasks.aspx)
* [Downloads](http://blogs.technet.com/b/scottschnoll/archive/2011/06/08/witness-server-warning-message-when-using-certain-database-availability-group-tasks.aspx)
* [Training](http://blogs.technet.com/b/scottschnoll/archive/2011/06/08/witness-server-warning-message-when-using-certain-database-availability-group-tasks.aspx)
* [Support](http://blogs.technet.com/b/scottschnoll/archive/2011/06/08/witness-server-warning-message-when-using-certain-database-availability-group-tasks.aspx)

* [Sign in](https://login.live.com/login.srf?wa=wsignin1.0&wtrealm=blogs.technet.com&wreply=https%3a%2f%2fblogs.technet.com%2fb%2fscottschnoll%2farchive%2f2011%2f06%2f08%2fwitness-server-warning-message-when-using-certain-database-availability-group-tasks.aspx%3fstoAI%3d10&wp=MBI_FED_SSL&wlcxt=microsoft%24microsoft%24microsoft)

Â **<http://blogs.technet.com/b/scottschnoll/archive/2011/06/08/witness-server-warning-message-when-using-certain-database-availability-group-tasks.aspx>**

# [Is this thing on?](http://blogs.technet.com/b/scottschnoll/default.aspx)

Scott Schnoll's weblog

Options

* [Home](http://blogs.technet.com/b/scottschnoll/default.aspx)

* [About](http://blogs.technet.com/b/scottschnoll/about.aspx)
* [Email Blog Author](http://blogs.technet.com/b/scottschnoll/contact.aspx)
* [Share this](http://blogs.technet.com/b/scottschnoll/archive/2011/06/08/witness-server-warning-message-when-using-certain-database-availability-group-tasks.aspxmailto:?subject=Witness%20Server%20Warning%20Message%20When%20Using%20Certain%20Database%20Availability%20Group%20Tasks&body=http://blogs.technet.com/b/scottschnoll/archive/2011/06/08/witness-server-warning-message-when-using-certain-database-availability-group-tasks.aspx)
* [RSS for posts](http://blogs.technet.com/b/scottschnoll/rss.aspx)
* [Atom](http://blogs.technet.com/b/scottschnoll/atom.aspx)
* [RSS for comments](http://blogs.technet.com/b/scottschnoll/rsscomments.aspx)

Search Blogs

Search this blog Search all blogs

Tags

* [Announcements](http://blogs.technet.com/b/scottschnoll/archive/tags/Announcements/default.aspx)

* [Certification](http://blogs.technet.com/b/scottschnoll/archive/tags/Certification/default.aspx)
* [Conferences](http://blogs.technet.com/b/scottschnoll/archive/tags/Conferences/default.aspx)
* [Continuous Replication](http://blogs.technet.com/b/scottschnoll/archive/tags/Continuous+Replication/default.aspx)
* [DAG](http://blogs.technet.com/b/scottschnoll/archive/tags/DAG/default.aspx)
* [Documentation](http://blogs.technet.com/b/scottschnoll/archive/tags/Documentation/default.aspx)
* [Downloads](http://blogs.technet.com/b/scottschnoll/archive/tags/Downloads/default.aspx)
* [ESE](http://blogs.technet.com/b/scottschnoll/archive/tags/ESE/default.aspx)
* [Exchange Server](http://blogs.technet.com/b/scottschnoll/archive/tags/Exchange+Server/default.aspx)
* [Exchange Server 2010](http://blogs.technet.com/b/scottschnoll/archive/tags/Exchange+Server+2010/default.aspx)
* [Exchange Server 2013](http://blogs.technet.com/b/scottschnoll/archive/tags/Exchange+Server+2013/default.aspx)
* [General](http://blogs.technet.com/b/scottschnoll/archive/tags/General/default.aspx)
* [High Availability](http://blogs.technet.com/b/scottschnoll/archive/tags/High+Availability/default.aspx)
* [Microsoft](http://blogs.technet.com/b/scottschnoll/archive/tags/Microsoft/default.aspx)
* [New releases](http://blogs.technet.com/b/scottschnoll/archive/tags/New+releases/default.aspx)
* [Security](http://blogs.technet.com/b/scottschnoll/archive/tags/Security/default.aspx)
* [Site Resilience](http://blogs.technet.com/b/scottschnoll/archive/tags/Site+Resilience/default.aspx)
* [Storage](http://blogs.technet.com/b/scottschnoll/archive/tags/Storage/default.aspx)
* [Tools](http://blogs.technet.com/b/scottschnoll/archive/tags/Tools/default.aspx)
* [Training](http://blogs.technet.com/b/scottschnoll/archive/tags/Training/default.aspx)
* [Updates](http://blogs.technet.com/b/scottschnoll/archive/tags/Updates/default.aspx)
* [Videos](http://blogs.technet.com/b/scottschnoll/archive/tags/Videos/default.aspx)
* [Virtualization](http://blogs.technet.com/b/scottschnoll/archive/tags/Virtualization/default.aspx)
* [Webcasts](http://blogs.technet.com/b/scottschnoll/archive/tags/Webcasts/default.aspx)
* [Windows Clusters](http://blogs.technet.com/b/scottschnoll/archive/tags/Windows+Clusters/default.aspx)

Archive

* [June 2014](http://blogs.technet.com/b/scottschnoll/archive/2014/06.aspx) (1)

* [February 2014](http://blogs.technet.com/b/scottschnoll/archive/2014/02.aspx) (1)
* [November 2013](http://blogs.technet.com/b/scottschnoll/archive/2013/11.aspx) (1)
* [July 2013](http://blogs.technet.com/b/scottschnoll/archive/2013/07.aspx) (1)
* [June 2013](http://blogs.technet.com/b/scottschnoll/archive/2013/06.aspx) (1)
* [April 2013](http://blogs.technet.com/b/scottschnoll/archive/2013/04.aspx) (1)
* [November 2012](http://blogs.technet.com/b/scottschnoll/archive/2012/11.aspx) (1)
* [October 2012](http://blogs.technet.com/b/scottschnoll/archive/2012/10.aspx) (1)
* [September 2012](http://blogs.technet.com/b/scottschnoll/archive/2012/09.aspx) (1)
* [April 2012](http://blogs.technet.com/b/scottschnoll/archive/2012/04.aspx) (1)
* [January 2012](http://blogs.technet.com/b/scottschnoll/archive/2012/01.aspx) (2)
* [November 2011](http://blogs.technet.com/b/scottschnoll/archive/2011/11.aspx) (1)
* [July 2011](http://blogs.technet.com/b/scottschnoll/archive/2011/07.aspx) (1)
* [June 2011](http://blogs.technet.com/b/scottschnoll/archive/2011/06.aspx) (2)
* [May 2011](http://blogs.technet.com/b/scottschnoll/archive/2011/05.aspx) (2)
* [April 2011](http://blogs.technet.com/b/scottschnoll/archive/2011/04.aspx) (1)
* [January 2011](http://blogs.technet.com/b/scottschnoll/archive/2011/01.aspx) (3)
* [December 2010](http://blogs.technet.com/b/scottschnoll/archive/2010/12.aspx) (1)
* [September 2010](http://blogs.technet.com/b/scottschnoll/archive/2010/09.aspx) (1)
* [June 2010](http://blogs.technet.com/b/scottschnoll/archive/2010/06.aspx) (2)
* [May 2010](http://blogs.technet.com/b/scottschnoll/archive/2010/05.aspx) (2)
* [April 2010](http://blogs.technet.com/b/scottschnoll/archive/2010/04.aspx) (2)
* [February 2010](http://blogs.technet.com/b/scottschnoll/archive/2010/02.aspx) (1)
* [January 2010](http://blogs.technet.com/b/scottschnoll/archive/2010/01.aspx) (1)
* [December 2009](http://blogs.technet.com/b/scottschnoll/archive/2009/12.aspx) (1)
* [November 2009](http://blogs.technet.com/b/scottschnoll/archive/2009/11.aspx) (1)
* [August 2009](http://blogs.technet.com/b/scottschnoll/archive/2009/08.aspx) (1)
* [June 2009](http://blogs.technet.com/b/scottschnoll/archive/2009/06.aspx) (2)
* [May 2009](http://blogs.technet.com/b/scottschnoll/archive/2009/05.aspx) (1)
* [April 2009](http://blogs.technet.com/b/scottschnoll/archive/2009/04.aspx) (1)
* [March 2009](http://blogs.technet.com/b/scottschnoll/archive/2009/03.aspx) (6)
* [February 2009](http://blogs.technet.com/b/scottschnoll/archive/2009/02.aspx) (3)
* [January 2009](http://blogs.technet.com/b/scottschnoll/archive/2009/01.aspx) (2)
* [December 2008](http://blogs.technet.com/b/scottschnoll/archive/2008/12.aspx) (1)
* [October 2008](http://blogs.technet.com/b/scottschnoll/archive/2008/10.aspx) (1)
* [September 2008](http://blogs.technet.com/b/scottschnoll/archive/2008/09.aspx) (2)
* [August 2008](http://blogs.technet.com/b/scottschnoll/archive/2008/08.aspx) (3)
* [July 2008](http://blogs.technet.com/b/scottschnoll/archive/2008/07.aspx) (3)
* [June 2008](http://blogs.technet.com/b/scottschnoll/archive/2008/06.aspx) (9)
* [May 2008](http://blogs.technet.com/b/scottschnoll/archive/2008/05.aspx) (3)
* [April 2008](http://blogs.technet.com/b/scottschnoll/archive/2008/04.aspx) (1)
* [March 2008](http://blogs.technet.com/b/scottschnoll/archive/2008/03.aspx) (2)
* [February 2008](http://blogs.technet.com/b/scottschnoll/archive/2008/02.aspx) (3)
* [January 2008](http://blogs.technet.com/b/scottschnoll/archive/2008/01.aspx) (5)
* [December 2007](http://blogs.technet.com/b/scottschnoll/archive/2007/12.aspx) (3)
* [November 2007](http://blogs.technet.com/b/scottschnoll/archive/2007/11.aspx) (4)
* [October 2007](http://blogs.technet.com/b/scottschnoll/archive/2007/10.aspx) (2)
* [September 2007](http://blogs.technet.com/b/scottschnoll/archive/2007/09.aspx) (5)
* [August 2007](http://blogs.technet.com/b/scottschnoll/archive/2007/08.aspx) (1)
* [June 2007](http://blogs.technet.com/b/scottschnoll/archive/2007/06.aspx) (2)
* [March 2007](http://blogs.technet.com/b/scottschnoll/archive/2007/03.aspx) (1)
* [January 2007](http://blogs.technet.com/b/scottschnoll/archive/2007/01.aspx) (1)
* [December 2006](http://blogs.technet.com/b/scottschnoll/archive/2006/12.aspx) (4)
* [November 2006](http://blogs.technet.com/b/scottschnoll/archive/2006/11.aspx) (3)
* [October 2006](http://blogs.technet.com/b/scottschnoll/archive/2006/10.aspx) (2)
* [August 2006](http://blogs.technet.com/b/scottschnoll/archive/2006/08.aspx) (2)
* [July 2006](http://blogs.technet.com/b/scottschnoll/archive/2006/07.aspx) (6)
* [June 2006](http://blogs.technet.com/b/scottschnoll/archive/2006/06.aspx) (10)
* [May 2006](http://blogs.technet.com/b/scottschnoll/archive/2006/05.aspx) (4)
* [April 2006](http://blogs.technet.com/b/scottschnoll/archive/2006/04.aspx) (2)
* [January 2006](http://blogs.technet.com/b/scottschnoll/archive/2006/01.aspx) (2)
* [December 2005](http://blogs.technet.com/b/scottschnoll/archive/2005/12.aspx) (8)

**[TechNet Blogs](http://blogs.technet.com/)** Â» **[Is this thing on?](http://blogs.technet.com/b/scottschnoll/default.aspx)** Â» **[Witness Server Warning Message When Using Certain Database Availability Group Tasks](http://blogs.technet.com/b/scottschnoll/archive/2011/06/08/witness-server-warning-message-when-using-certain-database-availability-group-tasks.aspx)**

### Witness Server Warning Message When Using Certain Database Availability Group Tasks

![[./_resources/Witness_Server_Warning_Message_When_Using_Certain_Database_Availability_Group_Tasks_-_Is_this_thing_on_-_Site_Home_-_TechNet_Blogs_blogs.technet.com.resources/unknown_filename.png]]![[./_resources/Witness_Server_Warning_Message_When_Using_Certain_Database_Availability_Group_Tasks_-_Is_this_thing_on_-_Site_Home_-_TechNet_Blogs_blogs.technet.com.resources/unknown_filename.1.png]]![[./_resources/Witness_Server_Warning_Message_When_Using_Certain_Database_Availability_Group_Tasks_-_Is_this_thing_on_-_Site_Home_-_TechNet_Blogs_blogs.technet.com.resources/unknown_filename.png]]![[./_resources/Witness_Server_Warning_Message_When_Using_Certain_Database_Availability_Group_Tasks_-_Is_this_thing_on_-_Site_Home_-_TechNet_Blogs_blogs.technet.com.resources/unknown_filename.1.png]]![[./_resources/Witness_Server_Warning_Message_When_Using_Certain_Database_Availability_Group_Tasks_-_Is_this_thing_on_-_Site_Home_-_TechNet_Blogs_blogs.technet.com.resources/unknown_filename.png]]![[./_resources/Witness_Server_Warning_Message_When_Using_Certain_Database_Availability_Group_Tasks_-_Is_this_thing_on_-_Site_Home_-_TechNet_Blogs_blogs.technet.com.resources/unknown_filename.1.png]]![[./_resources/Witness_Server_Warning_Message_When_Using_Certain_Database_Availability_Group_Tasks_-_Is_this_thing_on_-_Site_Home_-_TechNet_Blogs_blogs.technet.com.resources/unknown_filename.png]]![[./_resources/Witness_Server_Warning_Message_When_Using_Certain_Database_Availability_Group_Tasks_-_Is_this_thing_on_-_Site_Home_-_TechNet_Blogs_blogs.technet.com.resources/unknown_filename.1.png]]![[./_resources/Witness_Server_Warning_Message_When_Using_Certain_Database_Availability_Group_Tasks_-_Is_this_thing_on_-_Site_Home_-_TechNet_Blogs_blogs.technet.com.resources/unknown_filename.png]]![[./_resources/Witness_Server_Warning_Message_When_Using_Certain_Database_Availability_Group_Tasks_-_Is_this_thing_on_-_Site_Home_-_TechNet_Blogs_blogs.technet.com.resources/unknown_filename.1.png]]
 ![[./_resources/Witness_Server_Warning_Message_When_Using_Certain_Database_Availability_Group_Tasks_-_Is_this_thing_on_-_Site_Home_-_TechNet_Blogs_blogs.technet.com.resources/avatar.jpg]][Scott Schnoll MSFT](http://social.technet.microsoft.com/profile/Scott%20Schnoll%20[MSFT])
8 Jun 2011 5:38 PM

* **[0](http://blogs.technet.com/b/scottschnoll/archive/2011/06/08/witness-server-warning-message-when-using-certain-database-availability-group-tasks.aspx#comments)**

Recently, some customers reported that when they create a DAG, they get a warning message that states the following:

> The Exchange Trusted Subsystem is not a member of the local Administrators group on specified witness server <ServerName>.

In these cases, the customerâs intended witness server was not an Exchange 2010 server.Â  As documented in [TechNet](http://technet.microsoft.com/en-us/library/dd351172.aspx), if the witness server you specify isn't an Exchange 2010 server, you must add the Exchange Trusted Subsystem (ETS) universal security group (USG) to the local Administrators group on the witness server. These security permissions are necessary to ensure that Exchange can create a directory and share on the witness server as needed.

After some inspection, the customers confirmed that, contrary to the error message, the ETS USG was a member of the local administrators group on their intended witness server.Â  Moreover, even though this warning appeared, there were no ill effects in functionality.Â  The directory and share on the witness server were created as needed, the file share witness cluster resource was online, and the DAG passed all replication health checks.

After hearing about this, I went to my lab to test this, and I was able to reproduce the issue.Â  I added the ETS USG to the local administrators group on my witness server (a Windows 2008 file server) and ran New-DatabaseAvailabilityGroup, specifying my witness server.Â  I received the same warning message, and verified that despite the message, all was perfectly healthy with the DAG, and there were no permission problems, witness server or cluster problems or other issues.

Even though it appeared as though this warning message could be safely ignored, I wondered why we were getting it in the first place.Â  So I went digging into the source code to find out.

Let me describe what is happening and why you, too, can safely ignore the warning message.

During various DAG-related tasks that configure witness server properties (namely, New-DatabaseAvailabilityGroup, Set-DatabaseAvailabilityGroup and Restore-DatabaseAvailabilityGroup), the code is actually checking to see if the witness server is a member of the Exchange Trusted Subsystem USG.

As you may know, there is no requirement that the witness server be a member of the ETS USG.Â  Nonetheless, the code for these tasks does check for this, and if it finds that the witness server is not a member of the ETS USG, it issues a warning message.

Unfortunately, to confuse things even more, the warning message says:

> The Exchange Trusted Subsystem is not a member of the local Administrators group on specified witness server <ServerName>.

It says nothing about the witness server not being a member of the ETS USG, even though the code is checking for that.Â  Instead, it makes it appear as though the permission perquisites have not been satisfied, even though they actually have.

But, even though the message does not pertain to the actual check that failed, that does not make this a string bug.Â  This is a code bug, as there is no requirement that the witness server be a member of the ETS USG.Â  Thus, the code should not be checking for this condition.Â  If this bug is fixed and the check is removed, the string will be removed with it. Unless and until that happens, _**if you are seeing this warning message when you are using any of the above-mentioned tasks, and you have verified that the ETS USG is a member of the local administrators group on your witness server, then you can likely safely ignore the warning message**._ You should run Test-ReplicationHealth to verify the health of the DAG once members have been added to it.

Because we are doing this check in code, you can of course add the witness server to the ETS group, and also make the ETS group a member of the local administrators group on the witness server, and all of these tasks will complete without this warning message. But, don't do that in production because (1) it is not needed and (2) it gives the witness server way more permissions than it should ever have (unless of course, the witness server is an Exchange 2010 server).

* [0 Comments](http://blogs.technet.com/b/scottschnoll/archive/2011/06/08/witness-server-warning-message-when-using-certain-database-availability-group-tasks.aspx#comments)

[DAG](http://blogs.technet.com/b/scottschnoll/archive/tags/DAG/default.aspx), [High Availability](http://blogs.technet.com/b/scottschnoll/archive/tags/High+Availability/default.aspx), [Exchange Server 2010](http://blogs.technet.com/b/scottschnoll/archive/tags/Exchange+Server+2010/default.aspx)

[![[./_resources/Witness_Server_Warning_Message_When_Using_Certain_Database_Availability_Group_Tasks_-_Is_this_thing_on_-_Site_Home_-_TechNet_Blogs_blogs.technet.com.resources/facebook.gif]]](http://www.facebook.com/sharer.php?u=http%3A%2F%2Fblogs.technet.com%2Fb%2Fscottschnoll%2Farchive%2F2011%2F06%2F08%2Fwitness-server-warning-message-when-using-certain-database-availability-group-tasks.aspx&t=Witness%20Server%20Warning%20Message%20When%20Using%20Certain%20Database%20Availability%20Group%20Tasks)
[![[./_resources/Witness_Server_Warning_Message_When_Using_Certain_Database_Availability_Group_Tasks_-_Is_this_thing_on_-_Site_Home_-_TechNet_Blogs_blogs.technet.com.resources/linkedin.gif]]](http://www.linkedin.com/shareArticle?mini=true&ro=true&summary=&source=Microsoft&armin=armin&url=http%3A%2F%2Fblogs.technet.com%2Fb%2Fscottschnoll%2Farchive%2F2011%2F06%2F08%2Fwitness-server-warning-message-when-using-certain-database-availability-group-tasks.aspx&title=Witness%20Server%20Warning%20Message%20When%20Using%20Certain%20Database%20Availability%20Group%20Tasks)
[![[./_resources/Witness_Server_Warning_Message_When_Using_Certain_Database_Availability_Group_Tasks_-_Is_this_thing_on_-_Site_Home_-_TechNet_Blogs_blogs.technet.com.resources/reddit.gif]]](http://www.reddit.com/submit?url=http%3A%2F%2Fblogs.technet.com%2Fb%2Fscottschnoll%2Farchive%2F2011%2F06%2F08%2Fwitness-server-warning-message-when-using-certain-database-availability-group-tasks.aspx&title=Witness%20Server%20Warning%20Message%20When%20Using%20Certain%20Database%20Availability%20Group%20Tasks)
[![[./_resources/Witness_Server_Warning_Message_When_Using_Certain_Database_Availability_Group_Tasks_-_Is_this_thing_on_-_Site_Home_-_TechNet_Blogs_blogs.technet.com.resources/twitter.gif]]](https://twitter.com/share?status=Witness%20Server%20Warning%20Message%20When%20Using%20Certain%20Database%20Availability%20Group%20Tasks%20:%20http://blogs.technet.com/b/scottschnoll/archive/2011/06/08/witness-server-warning-message-when-using-certain-database-availability-group-tasks.aspx)

Comments

Leave a Comment

* Name

* Comment
* [Post](http://blogs.technet.com/b/scottschnoll/archive/2011/06/08/witness-server-warning-message-when-using-certain-database-availability-group-tasks.aspx#)

* Â© 2014 Microsoft Corporation.

* [Terms of Use](http://technet.microsoft.com/en-US/cc300389.aspx)
* [Trademarks](http://www.microsoft.com/library/toolbar/3.0/trademarks/en-us.mspx)
* [Privacy & Cookies](http://go.microsoft.com/fwlink/?LinkId=248681)
* 7.1.507.6741
