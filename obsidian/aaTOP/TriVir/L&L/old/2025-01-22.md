### Install interactively

instaling on am2!

export APACHE_RUN_USER=forgerock
export APACHE_RUN_GROUP=forgerock

On step to stop httpd . . I don't hve one in the systemctl list . .

Found and jeremiah/carl confirmed: AM1 has  haproxy, AM2 has httpd . .

* Shutting down httpd on am2
* [root@am2 opt]# systemctl stop httpd

Next step for next time:

agentadmin
[root@am2 bin]# pwd
/root/web_agents/apache24_agent/bin


took snapshot 


./agentadmin --i


Enter the complete path to the httpd.conf file which is used by Apache HTTP
Server to store its configuration.
[ q or 'ctrl+c' to exit ]
Configuration file [/opt/apache/conf/httpd.conf]: /etc/httpd/conf/httpd.conf

Change ownership of created directories using User and Group settings in httpd.conf
[ q or 'ctrl+c' to exit ]
(yes/no): [no]: yes

To set properties from an existing configuration enter path to file
[ q or 'ctrl+c' to exit, return to ignore ]
Existing agent.conf file:

Enter the URL where the AM server is running. Please include the
deployment URI also as shown below:
(http://am.example.com:58080/am)
[ q or 'ctrl+c' to exit ]
AM server URL: https://people.dev.trivir.com/am


from chat: - these are files to get after agent install
Jeremiah Seaver
6 min
You can download the files here: \\nas\UT\training\LunchAndLearn\AM Accreditation




The path and name of the password file: /root/secure-directory/pwd.txt

Installation parameters: . . but am url I think should have been; http://am1.dev.trivir.com:8080/am

   AM URL: https://people.dev.trivir.com/am
   Agent URL: http://people.dev.trivir.com:8080/am
   Agent ID: web-agent
   Agent realm/organization name: /
   Agent password source: /root/secure-directory/pwd.txt

Confirm configuration (yes/no): [no]:


travis: oatuh page is blank; baseurl service configured . .


reverted snapshot, trying again

export APACHE_RUN_USER=forgerock
export APACHE_RUN_GROUP=forgerock
systemctl stop httpd
./agentadmin --i
/etc/httpd/conf/httpd.conf
yes (change ownership of directories)
existing agent.conf: no
Agent url:  https://apache.dev.trivir.com
agent id: apache-agent
realm/org name: /

Had to go create this - it's TriVir#1:
The path and name of the password file: /root/secure-directory/pwd.txt

Installation parameters:

   AM URL: https://people.dev.trivir.com
   Agent URL:  https://apache.dev.trivir.com
   Agent ID: web-agent
   Agent realm/organization name: /
   Agent password source: /root/secure-directory/pwd.txt

Confirm configuration (yes/no): [no]:

vi  /root/web_agents/apache24_agent/bin/../log/install_20250122123750.log

last few lines:

2025-01-22 12:45:02  validating configuration parameters...
2025-01-22 12:45:02  error validating AM agent configuration
2025-01-22 12:45:02  installation error
json_serverinfo_request: AM serverinfo endpoint returns http status 400
am_sdk_agent_authn: agent authentication and profile failure for: http://am1.dev.trivir.com:8080/am/
2025-01-22 12:45:02  installation exit





reverted snapshot, trying again

export APACHE_RUN_USER=forgerock
export APACHE_RUN_GROUP=forgerock
systemctl stop httpd
./agentadmin --i


/etc/httpd/conf/httpd.conf
yes (change ownership of directories)
existing agent.conf: no
Agent url:  https://apache.dev.trivir.com
agent id: apache-agent
realm/org name: /


sent to carl:
1 min
Installation parameters:  

[https://people.dev.trivir.com/am](https://people.dev.trivir.com/am)

   AM URL: [https://people.dev.trivir.com](https://people.dev.trivir.com)  
   Agent URL: https://apache.dev.trivir.com
   Agent ID: apache-agent  
   Agent realm/organization name: /people
   Agent password source: /root/secure-password/pwd.txt  
  
Confirm configuration (yes/no): [no]: yes

Validating... Skipped.

Creating configuration...

Installation complete.
[root@am2 bin]#

results in httpd.conf
+
+
+LoadModule amagent_module /root/web_agents/apache24_agent/bin/../lib/mod_openam.so
+AmAgent On
+AmAgentConf /root/web_agents/apache24_agent/instances/agent_1/config/agent.conf


testing:
Preston mentioned go to this  . should get redirected to login . . 
[apache.dev.trivir.com:443](http://apache.dev.trivir.com:443) 

OBVIOUS NEXT STEP:
REINSTALL WITH THIS: [https://people.dev.trivir.com/am](https://people.dev.trivir.com/am)


Starting now with exports above 1/29/2025 12:18:48 PM

export APACHE_RUN_USER=forgerock
export APACHE_RUN_GROUP=forgerock
systemctl stop httpd
./agentadmin --i

/etc/httpd/conf/httpd.conf
yes (change ownership of directories)
existing agent.conf: no (just return)
AM server url:  https://apache.dev.trivir.com:443
confirm setting: yes

agent id: apache-agent
realm/org name: /