2/12/2025 12:05:01 PM
Starting up josh's vms . .may have missed last week.
jEREMIAH'S SCREEN;
![[Pasted image 20250212120643.png]]

2/12/2025 12:07:28 PM
now:
![[Pasted image 20250212120729.png]]

2/12/2025 12:11:00 PM
now making step up policy
![[Pasted image 20250212121103.png]]
	 ![[Pasted image 20250212121118.png]]
![[Pasted image 20250212121138.png]]

![[Pasted image 20250212121150.png]]

protecting secure.html:
![[Pasted image 20250212121206.png]]


![[Pasted image 20250212121412.png]]
just authed users:
![[Pasted image 20250212121429.png]]

2/12/2025 12:14:52 PM
![[Pasted image 20250212121452.png]]

envrionment - one time trasnaction:
![[Pasted image 20250212121508.png]]

this, thne click check mark, and save changes:
![[Pasted image 20250212121529.png]]

2/12/2025 12:16:54 PM
summary:
![[Pasted image 20250212121656.png]]

now testing
![[Pasted image 20250212121738.png]]


redirected to log in
![[Pasted image 20250212121805.png]]

2/12/2025 12:19:00 PM
studying URL from proected 'app' - 
[https://people.dev.trivir.com/am/XUI/?realm=/people](https://people.dev.trivir.com/am/XUI/?realm=/people)  
&authIndexType=composite_advice  
&authIndexValue=%3CAdvices%3E%3CAttributeValuePair%3E%3CAttribute%20name%3D%22TransactionConditionAdvice%22/%3E%3CValue%3E0cff0214-80a7-4952-b488-3406aa55a673%3C/Value%3E%3C/AttributeValuePair%3E%3C/Advices%3E&goto=[https://people.dev.trivir.com/am/oauth2/authorize?state%3DSwtimkU0QWVrTuwdi2VIp5IO6i4%26nonce%3DEEmvRNOn61nqe4_3%26claims%3D%257B%2522id_token%2522:%257B%2522acr%2522:%257B%2522essential%2522:true,%2522values%2522:%255B%2522composite_advice:%253CAdvices%253E%253CAttributeValuePair%253E%253CAttribute%2520name%253D%255C%2522TransactionConditionAdvice%255C%2522/%253E%253CValue%253E0cff0214-80a7-4952-b488-3406aa55a673%253C/Value%253E%253C/AttributeValuePair%253E%253C/Advices%253E%2522%255D%257D,%2522TxId%2522:%257B%2522value%2522:%25220cff0214-80a7-4952-b488-3406aa55a673%2522%257D%257D%257D%26response_mode%3Dform_post%26redirect_uri%3Dhttps://apache.dev.trivir.com:443/agent/cdsso-oauth2%26response_type%3Did_token%26scope%3Dopenid%26client_id%3Dapache-agent%26agent_provider%3Dtrue%26agent_realm%3D/people%26acr%3Dcomposite_advice%253A%253CAdvices%253E%253CAttributeValuePair%253E%253CAttribute%2Bname%253D%2522TransactionConditionAdvice%2522%252F%253E%253CValue%253E0cff0214-80a7-4952-b488-3406aa55a673%253C%252FValue%253E%253C%252FAttributeValuePair%253E%253C%252FAdvices%253E%26acr_sig%3DmLZg_P9wrQXzb9_8kAYGiexEsNKF15GuqeXsnQPiWE8#login/](https://people.dev.trivir.com/am/oauth2/authorize?state%3DSwtimkU0QWVrTuwdi2VIp5IO6i4%26nonce%3DEEmvRNOn61nqe4_3%26claims%3D%257B%2522id_token%2522:%257B%2522acr%2522:%257B%2522essential%2522:true,%2522values%2522:%255B%2522composite_advice:%253CAdvices%253E%253CAttributeValuePair%253E%253CAttribute%2520name%253D%255C%2522TransactionConditionAdvice%255C%2522/%253E%253CValue%253E0cff0214-80a7-4952-b488-3406aa55a673%253C/Value%253E%253C/AttributeValuePair%253E%253C/Advices%253E%2522%255D%257D,%2522TxId%2522:%257B%2522value%2522:%25220cff0214-80a7-4952-b488-3406aa55a673%2522%257D%257D%257D%26response_mode%3Dform_post%26redirect_uri%3Dhttps://apache.dev.trivir.com:443/agent/cdsso-oauth2%26response_type%3Did_token%26scope%3Dopenid%26client_id%3Dapache-agent%26agent_provider%3Dtrue%26agent_realm%3D/people%26acr%3Dcomposite_advice%253A%253CAdvices%253E%253CAttributeValuePair%253E%253CAttribute%2Bname%253D%2522TransactionConditionAdvice%2522%252F%253E%253CValue%253E0cff0214-80a7-4952-b488-3406aa55a673%253C%252FValue%253E%253C%252FAttributeValuePair%253E%253C%252FAdvices%253E%26acr_sig%3DmLZg_P9wrQXzb9_8kAYGiexEsNKF15GuqeXsnQPiWE8#login/)

![[Pasted image 20250212121945.png]]

2/12/2025 12:20:30 PM
![[Pasted image 20250212122030.png]]

discssing 'advice' - and requesting to 'satisfy transaction', which should be satisifed by the StepUp journey.
![[Pasted image 20250212122212.png]]

if using suspended journey, need to ensure journey timeout and 'XXXX' timeout matches, so what whent he journey contnues, it doesn't time out.

end result:

![[Pasted image 20250212122612.png]]

Strategy 'StepUp' has to match journey exactly  . .no spaces in journey - though requires url encoding, and is annoying.
![[Pasted image 20250212122624.png]]


![[Pasted image 20250212122714.png]]

![[Pasted image 20250212122720.png]]

Shift refresh -  caused auth again; becuase transaction is required
![[Pasted image 20250212122854.png]]

if you instead achieve auth level, then no authentication is required.
2/12/2025 12:32:29 PM

now, on agent config: non enforced url: - for example: .gif don't need to protect . .also static pages. . .just dynamic pages, and services being called. Need to not enforce assets.
![[Pasted image 20250212123225.png]]

![[Pasted image 20250212123417.png]]


![[Pasted image 20250212123647.png]]

2/12/2025 12:46:28 PM
next week: harddening the setup: not using names and default keys etc.
After that, then federation: Aaron Miwa